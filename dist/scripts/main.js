$(document).ready(function(){$.stellar({horizontalScrolling:!1,verticalOffset:40});var a=$("#header-content");$(window).scroll(function(){var b=$(document).scrollTop()/$(".site-header").height();a.css("opacity",1-2*b)}),$("#latest-pins").dcPinterestFeed({id:"stevenkuster",results:25});var b=$(".stream").imagesLoaded(function(){b.find("img").imgpreload(function(){b.isotope({itemSelector:"section",layoutMode:"masonry",masonry:{columnWidth:"section"}})})});$.ajax({url:"https://www.strava.com/api/v3/athlete/activities?per_page=4&access_token=f89e87fc8e44fe8ea976bd481a7aeaebf31ce355",dataType:"jsonp",success:function(a){var b=$("#rides");$.each(a,function(a,c){function d(a){var b=a/1e3;return b.toFixed(1)+" km"}function e(a){var b=3.6*a;return b.toFixed(1)+" km/h"}function f(a){var b=[Math.floor(a/60/60)%24,Math.floor(a/60)%60,a%60];return $.map(b,function(a){return(10>a?"0":"")+a}).join(":")}var g=$("<section/>").attr("id",c.id).appendTo(b),h=$("<div/>").addClass("panel").appendTo(g),i=$("<div/>").addClass("panel-heading").appendTo(h),j=moment(c.start_date).format("DD MMMM YYYY");$("<h2>").addClass("panel-title").text(j).appendTo(i);var k=$("<span/>").addClass("kudocount").text(c.kudos_count).appendTo(i);$("<i/>").addClass("fa fa-thumbs-up").prependTo(k);var l=$("<span/>").addClass("kudocount").text(c.comment_count).appendTo(i);$("<i/>").addClass("fa fa-comment").prependTo(l),url=GMaps.staticMapURL({size:[800,400],zoom:10,fitZoom:!0,fitLatLngBounds:c.map.summary_polyline,polyline:{path:c.map.summary_polyline,strokeColor:"#FC4C02",strokeOpacity:1,strokeWeight:2}});var m=$("<a/>").attr("href","http://www.strava.com/activities/"+c.id).attr("target","_blank").addClass("ride_img").appendTo(h);$("<img/>").attr("src",url).appendTo(m);var n=$("<div/>").addClass("panel-body").appendTo(h),o=$("<div>").addClass("datalist").appendTo(n),p=$("<div>").addClass("datalist-row").appendTo(o),q=$("<div>").addClass("datalist-row").appendTo(o),r=d(c.distance),s=$("<div>").addClass("datalist-cell").text(r).appendTo(p);$("<div>").text("Distance").addClass("datalist-description").appendTo(s);var t=$("<div>").addClass("datalist-cell").text(c.total_elevation_gain+" m").appendTo(p);$("<div>").text("Elevation").addClass("datalist-description").appendTo(t);var u=e(c.average_speed),v=$("<div>").addClass("datalist-cell").text(u).appendTo(p);$("<div>").text("Average speed").addClass("datalist-description").appendTo(v);var w=f(c.moving_time),x=$("<div>").addClass("datalist-cell").text(w).appendTo(q);$("<div>").text("Ride time").addClass("datalist-description").appendTo(x);var y=$("<div>").addClass("datalist-cell").text(c.average_heartrate.toFixed(0)+" bpm").appendTo(q);$("<div>").text("Heartrate").addClass("datalist-description").appendTo(y);var z=$("<div>").addClass("datalist-cell").text(c.weighted_average_watts+" W").appendTo(q);$("<div>").text("Power").addClass("datalist-description").appendTo(z);var A=$("<a/>").attr("href","http://www.strava.com/activities/"+c.id).attr("target","_blank").text("view on Strava").addClass("btn");$(A).appendTo(n)})}}),$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top},750,"swing"),!1}}),$("body").scrollspy({target:".scroll-label"})});